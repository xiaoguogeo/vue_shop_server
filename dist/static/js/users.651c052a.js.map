{"version":3,"file":"static/js/users.651c052a.js","mappings":"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","sources":["webpack://vue_shop/./src/pages/Users.vue","webpack://vue_shop/src/pages/Users.vue","webpack://vue_shop/./src/pages/Users.vue?8a2b","webpack://vue_shop/./src/pages/Users.vue?5897"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),_c('el-card',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.queryUser},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.queryUser},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addDialogVisible}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.userList,\"stripe\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\"}}),_c('el-table-column',{attrs:{\"label\":\"姓名\",\"prop\":\"username\"}}),_c('el-table-column',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}}),_c('el-table-column',{attrs:{\"label\":\"电话\",\"prop\":\"mobile\"}}),_c('el-table-column',{attrs:{\"label\":\"角色\",\"prop\":\"role_name\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(row_data){return [_c('el-switch',{on:{\"change\":function($event){return _vm.changeState(row_data.row)}},model:{value:(row_data.row.mg_state),callback:function ($$v) {_vm.$set(row_data.row, \"mg_state\", $$v)},expression:\"row_data.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(row_data){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"circle\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.editUserInfo(row_data.row.id)}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteUser(row_data.row.id)}}}),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"分配角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"circle\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.assignRole(row_data.row)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[1, 2, 5, 10],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.dialogVisibleForAdd,\"close-on-click-modal\":false,\"width\":\"30%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisibleForAdd=$event}}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.addUserForm,\"rules\":_vm.addOrEditFormRules,\"label-width\":\"65px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addUserForm.username),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"username\", $$v)},expression:\"addUserForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.addUserForm.password),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"password\", $$v)},expression:\"addUserForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addUserForm.email),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"email\", $$v)},expression:\"addUserForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addUserForm.mobile),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"mobile\", $$v)},expression:\"addUserForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.cancelAddUser}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmAddUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改用户信息\",\"visible\":_vm.dialogVisibleForEdit,\"width\":\"30%\",\"close-on-click-modal\":false,\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisibleForEdit=$event}}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.addOrEditFormRules,\"label-width\":\"65px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"edit_username\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editForm.username),callback:function ($$v) {_vm.$set(_vm.editForm, \"username\", $$v)},expression:\"editForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editForm.email),callback:function ($$v) {_vm.$set(_vm.editForm, \"email\", $$v)},expression:\"editForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editForm.mobile),callback:function ($$v) {_vm.$set(_vm.editForm, \"mobile\", $$v)},expression:\"editForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.cancelEditUser}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmEditUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.dialogVisibleForAssign,\"width\":\"30%\",\"close-on-click-modal\":false,\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisibleForAssign=$event},\"close\":_vm.assignRightsDialogClosed}},[_c('p',[_vm._v(\"当前用户：\"+_vm._s(_vm.userInfo.username))]),_c('p',[_vm._v(\"当前角色：\"+_vm._s(_vm.userInfo.role_name))]),_c('p',[_vm._v(\" 分配新角色： \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectedRoleId),callback:function ($$v) {_vm.selectedRoleId=$$v},expression:\"selectedRoleId\"}},_vm._l((_vm.roleList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.id}})}),1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisibleForAssign = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmAssignRole}},[_vm._v(\"确 定\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n            <el-breadcrumb-item :to=\"{ path: '/home' }\"\r\n                >首页</el-breadcrumb-item\r\n            >\r\n            <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n            <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n        <el-card>\r\n            <el-row :gutter=\"20\">\r\n                <el-col :span=\"8\">\r\n                    <el-input\r\n                        placeholder=\"请输入内容\"\r\n                        class=\"input-with-select\"\r\n                        v-model=\"queryInfo.query\"\r\n                        clearable\r\n                        @clear=\"queryUser\"\r\n                    >\r\n                        <el-button\r\n                            slot=\"append\"\r\n                            icon=\"el-icon-search\"\r\n                            @click=\"queryUser\"\r\n                        ></el-button>\r\n                    </el-input>\r\n                </el-col>\r\n                <el-col :span=\"4\">\r\n                    <el-button type=\"primary\" @click=\"addDialogVisible\"\r\n                        >添加用户</el-button\r\n                    >\r\n                </el-col>\r\n            </el-row>\r\n            <el-table :data=\"userList\" stripe border>\r\n                <el-table-column type=\"index\" label=\"#\"></el-table-column>\r\n                <el-table-column label=\"姓名\" prop=\"username\"></el-table-column>\r\n                <el-table-column label=\"邮箱\" prop=\"email\"></el-table-column>\r\n                <el-table-column label=\"电话\" prop=\"mobile\"></el-table-column>\r\n                <el-table-column\r\n                    label=\"角色\"\r\n                    prop=\"role_name\"\r\n                ></el-table-column>\r\n                <el-table-column label=\"状态\">\r\n                    <template v-slot=\"row_data\">\r\n                        <el-switch\r\n                            v-model=\"row_data.row.mg_state\"\r\n                            @change=\"changeState(row_data.row)\"\r\n                        ></el-switch>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\" align=\"center\">\r\n                    <template v-slot=\"row_data\">\r\n                        <el-button\r\n                            type=\"primary\"\r\n                            icon=\"el-icon-edit\"\r\n                            circle\r\n                            size=\"mini\"\r\n                            @click=\"editUserInfo(row_data.row.id)\"\r\n                        ></el-button>\r\n                        <el-button\r\n                            type=\"danger\"\r\n                            icon=\"el-icon-delete\"\r\n                            circle\r\n                            size=\"mini\"\r\n                            @click=\"deleteUser(row_data.row.id)\"\r\n                        ></el-button>\r\n                        <el-tooltip\r\n                            effect=\"dark\"\r\n                            content=\"分配角色\"\r\n                            placement=\"top\"\r\n                            :enterable=\"false\"\r\n                        >\r\n                            <el-button\r\n                                type=\"warning\"\r\n                                icon=\"el-icon-setting\"\r\n                                circle\r\n                                size=\"mini\"\r\n                                @click=\"assignRole(row_data.row)\"\r\n                            ></el-button>\r\n                        </el-tooltip>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <!-- 分页 -->\r\n            <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"queryInfo.pagenum\"\r\n                :page-sizes=\"[1, 2, 5, 10]\"\r\n                :page-size=\"queryInfo.pagesize\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"total\"\r\n            >\r\n            </el-pagination>\r\n        </el-card>\r\n        <!-- 添加用户对话框 -->\r\n        <el-dialog\r\n            title=\"添加用户\"\r\n            :visible.sync=\"dialogVisibleForAdd\"\r\n            :close-on-click-modal=\"false\"\r\n            width=\"30%\"\r\n            center\r\n        >\r\n            <el-form\r\n                :model=\"addUserForm\"\r\n                :rules=\"addOrEditFormRules\"\r\n                ref=\"addFormRef\"\r\n                label-width=\"65px\"\r\n            >\r\n                <el-form-item label=\"用户名\" prop=\"username\">\r\n                    <el-input v-model=\"addUserForm.username\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码\" prop=\"password\">\r\n                    <el-input v-model=\"addUserForm.password\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                    <el-input v-model=\"addUserForm.email\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"手机\" prop=\"mobile\">\r\n                    <el-input v-model=\"addUserForm.mobile\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"cancelAddUser\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"confirmAddUser\"\r\n                    >确 定</el-button\r\n                >\r\n            </span>\r\n        </el-dialog>\r\n        <!-- 修改用户信息对话框 -->\r\n        <el-dialog\r\n            title=\"修改用户信息\"\r\n            :visible.sync=\"dialogVisibleForEdit\"\r\n            width=\"30%\"\r\n            :close-on-click-modal=\"false\"\r\n            center\r\n        >\r\n            <el-form\r\n                :model=\"editForm\"\r\n                :rules=\"addOrEditFormRules\"\r\n                ref=\"editFormRef\"\r\n                label-width=\"65px\"\r\n            >\r\n                <el-form-item label=\"用户名\" prop=\"edit_username\">\r\n                    <el-input v-model=\"editForm.username\" disabled></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                    <el-input v-model=\"editForm.email\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"手机\" prop=\"mobile\">\r\n                    <el-input v-model=\"editForm.mobile\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"cancelEditUser\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"confirmEditUser\"\r\n                    >确 定</el-button\r\n                >\r\n            </span>\r\n        </el-dialog>\r\n        <!-- 分配角色对话框 -->\r\n        <el-dialog\r\n            title=\"分配角色\"\r\n            :visible.sync=\"dialogVisibleForAssign\"\r\n            width=\"30%\"\r\n            @close=\"assignRightsDialogClosed\"\r\n            :close-on-click-modal=\"false\"\r\n            center\r\n        >\r\n            <p>当前用户：{{ userInfo.username }}</p>\r\n            <p>当前角色：{{ userInfo.role_name }}</p>\r\n            <p>\r\n                分配新角色：\r\n                <el-select v-model=\"selectedRoleId\" placeholder=\"请选择\">\r\n                    <el-option\r\n                        v-for=\"item in roleList\"\r\n                        :key=\"item.id\"\r\n                        :label=\"item.roleName\"\r\n                        :value=\"item.id\"\r\n                    >\r\n                    </el-option>\r\n                </el-select>\r\n            </p>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogVisibleForAssign = false\"\r\n                    >取 消</el-button\r\n                >\r\n                <el-button type=\"primary\" @click=\"confirmAssignRole\"\r\n                    >确 定</el-button\r\n                >\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: \"User\",\r\n    created() {\r\n        this.getUserList();\r\n    },\r\n    data() {\r\n        // 自定义的验证邮箱规则\r\n        let checkEmail = (rule, value, cb) => {\r\n            const regEmail =\r\n                /^[a-zA-Z0-9_-]+@([a-zA-Z0-9_-]+\\.)+(com|cn|com\\.cn)/;\r\n            if (regEmail.test(value)) {\r\n                cb();\r\n            }\r\n            cb(new Error(\"请输入正确的邮箱\"));\r\n        };\r\n        // 自定义的验证手机号的规则\r\n        let checkMobile = (rule, value, cb) => {\r\n            const regMobile =\r\n                /^(13[0-9]|15[0-9]|17[0-9]|18[0-9]|14[57])[0-9]{8}$/;\r\n            if (regMobile.test(value)) {\r\n                cb();\r\n            }\r\n            cb(new Error(\"请输入正确的手机号\"));\r\n        };\r\n        return {\r\n            // 用户信息\r\n            queryInfo: {\r\n                query: \"\",\r\n                pagenum: 1,\r\n                pagesize: 2,\r\n            },\r\n            // 用户列表\r\n            userList: [],\r\n            addUserForm: {\r\n                username: \"\",\r\n                password: \"\",\r\n                email: \"\",\r\n                mobile: \"\",\r\n            },\r\n            editForm: {},\r\n            addOrEditFormRules: {\r\n                username: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入用户名\",\r\n                        trigger: \"blur\",\r\n                    },\r\n                    {\r\n                        min: 3,\r\n                        max: 18,\r\n                        message: \"用户名长度为3~18\",\r\n                        trigger: \"blur\",\r\n                    },\r\n                ],\r\n                password: [\r\n                    { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n                    {\r\n                        min: 3,\r\n                        max: 18,\r\n                        message: \"密码长度为3~18\",\r\n                        trigger: \"blur\",\r\n                    },\r\n                ],\r\n                email: [\r\n                    { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\r\n                    { validator: checkEmail, trigger: \"blur\" },\r\n                ],\r\n                mobile: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入手机号码\",\r\n                        trigger: \"blur\",\r\n                    },\r\n                    { validator: checkMobile, trigger: \"blur\" },\r\n                ],\r\n                edit_username: [],\r\n            },\r\n            total: 0,\r\n            // 需要分配角色的用户信息\r\n            userInfo: {},\r\n            // 角色列表\r\n            roleList: [],\r\n            // 选择的角色Id\r\n            selectedRoleId: \"\",\r\n            dialogVisibleForAdd: false,\r\n            dialogVisibleForEdit: false,\r\n            dialogVisibleForAssign: false,\r\n        };\r\n    },\r\n    methods: {\r\n        async getUserList() {\r\n            const { data: res } = await this.$http.get(\"users\", {\r\n                params: this.queryInfo,\r\n            });\r\n            if (res.meta.status !== 200) {\r\n                return this.$message({\r\n                    message: \"获取用户列表失败\",\r\n                    type: \"error\",\r\n                    center: true,\r\n                });\r\n            }\r\n            this.userList = res.data.users;\r\n            this.total = res.data.total;\r\n        },\r\n        handleSizeChange(newSize) {\r\n            this.queryInfo.pagesize = newSize;\r\n            this.getUserList();\r\n            // console.log(newPage)\r\n        },\r\n        handleCurrentChange(newPage) {\r\n            this.queryInfo.pagenum = newPage;\r\n            this.getUserList();\r\n            // console.log(newPage)\r\n        },\r\n        queryUser() {\r\n            this.getUserList();\r\n        },\r\n        addDialogVisible() {\r\n            this.dialogVisibleForAdd = true;\r\n        },\r\n        async changeState(user) {\r\n            // console.log(user.mg_state)\r\n            const { data: res } = await this.$http.put(\r\n                `users/${user.id}/state/${user.mg_state}`\r\n            );\r\n            if (res.meta.status !== 200) {\r\n                user.mg_state = !user.mg_state;\r\n                return this.$message({\r\n                    message: \"状态修改失败\",\r\n                    type: \"error\",\r\n                    center: true,\r\n                });\r\n            }\r\n        },\r\n        confirmAddUser() {\r\n            this.$refs.addFormRef.validate(async (valid) => {\r\n                if (!valid) return;\r\n                this.dialogVisibleForAdd = false;\r\n                const { data: res } = await this.$http.post(\r\n                    \"users\",\r\n                    this.addUserForm\r\n                );\r\n                // console.log(res)\r\n                if (res.meta.status !== 201)\r\n                    return this.$message({\r\n                        message: \"添加用户失败\",\r\n                        type: \"error\",\r\n                        center: true,\r\n                    });\r\n                this.$message({\r\n                    message: res.meta.msg,\r\n                    type: \"success\",\r\n                    center: true,\r\n                });\r\n                this.getUserList();\r\n                this.$refs.addFormRef.resetFields();\r\n            });\r\n        },\r\n        cancelAddUser() {\r\n            this.dialogVisibleForAdd = false;\r\n            this.$refs.addFormRef.resetFields();\r\n        },\r\n        async editUserInfo(id) {\r\n            const { data: res } = await this.$http.get(`users/${id}`);\r\n            if (res.meta.status !== 200)\r\n                return this.$message({\r\n                    message: \"修改用户信息失败\",\r\n                    type: \"error\",\r\n                    center: true,\r\n                });\r\n            this.dialogVisibleForEdit = true;\r\n            this.editForm = res.data;\r\n        },\r\n        confirmEditUser() {\r\n            this.$refs.editFormRef.validate(async (valid) => {\r\n                if (!valid) return;\r\n                // this.$refs.editFormRef.resetFields();\r\n                const { data: res } = await this.$http.put(\r\n                    `users/${this.editForm.id}`,\r\n                    { email: this.editForm.email, mobile: this.editForm.mobile }\r\n                );\r\n\r\n                if (res.meta.status !== 200)\r\n                    return this.$message({\r\n                        message: \"更新用户信息失败\",\r\n                        type: \"error\",\r\n                        center: true,\r\n                    });\r\n                this.dialogVisibleForEdit = false;\r\n                this.$message({\r\n                    message: \"更新用户信息成功\",\r\n                    type: \"success\",\r\n                    center: true,\r\n                });\r\n                this.getUserList();\r\n            });\r\n        },\r\n        cancelEditUser() {\r\n            this.dialogVisibleForEdit = false;\r\n            this.$refs.editFormRef.resetFields();\r\n        },\r\n        async deleteUser(id) {\r\n            const result = await this.$confirm(\r\n                \"此操作将永久删除该文件, 是否继续?\",\r\n                \"提示\",\r\n                {\r\n                    confirmButtonText: \"确定\",\r\n                    cancelButtonText: \"取消\",\r\n                    type: \"warning\",\r\n                }\r\n            ).catch((err) => err);\r\n            if (result === \"confirm\") {\r\n                const { data: res } = await this.$http.delete(`users/${id}`);\r\n                if (res.meta.status !== 200)\r\n                    return this.$message({\r\n                        message: \"删除失败\",\r\n                        type: \"error\",\r\n                        center: true,\r\n                    });\r\n                this.$message({\r\n                    message: \"删除成功\",\r\n                    type: \"success\",\r\n                    center: true,\r\n                });\r\n                this.getUserList();\r\n            } else {\r\n                return this.$message({\r\n                    message: \"已取消删除\",\r\n                    type: \"info\",\r\n                    center: true,\r\n                });\r\n            }\r\n        },\r\n        async assignRole(role) {\r\n            this.userInfo = role;\r\n            this.dialogVisibleForAssign = true;\r\n            const { data: res } = await this.$http.get(`roles`);\r\n            if (res.meta.status !== 200)\r\n                return this.$message({\r\n                    message: \"获取角色列表失败\",\r\n                    type: \"error\",\r\n                    center: true,\r\n                });\r\n            this.roleList = res.data;\r\n        },\r\n        async confirmAssignRole() {\r\n            if (!this.selectedRoleId) {\r\n                return this.$message({\r\n                    message: \"请选择要分配的新角色\",\r\n                    type: \"error\",\r\n                    center: true,\r\n                });\r\n            }\r\n            const { data: res } = await this.$http.put(\r\n                `users/${this.userInfo.id}/role`,\r\n                { rid: this.selectedRoleId }\r\n            );\r\n            if (res.meta.status !== 200)\r\n                return this.$message({\r\n                    message: \"分配角色失败\",\r\n                    type: \"error\",\r\n                    center: true,\r\n                });\r\n            this.$message({\r\n                message: \"分配角色成功\",\r\n                type: \"success\",\r\n                center: true,\r\n            });\r\n            this.getUserList();\r\n            this.dialogVisibleForAssign = false;\r\n        },\r\n        assignRightsDialogClosed() {\r\n            this.selectedRoleId = \"\";\r\n            this.userInfo = {};\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.el-card {\r\n    text-align: left;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=ed7c7b5a&scoped=true&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Users.vue?vue&type=style&index=0&id=ed7c7b5a&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ed7c7b5a\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","path","_v","staticClass","on","queryUser","model","value","queryInfo","query","callback","$$v","$set","expression","slot","addDialogVisible","userList","scopedSlots","_u","key","fn","row_data","$event","changeState","row","mg_state","editUserInfo","id","deleteUser","assignRole","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","dialogVisibleForAdd","ref","addUserForm","addOrEditFormRules","username","password","email","mobile","cancelAddUser","confirmAddUser","dialogVisibleForEdit","editForm","cancelEditUser","confirmEditUser","dialogVisibleForAssign","assignRightsDialogClosed","_s","userInfo","role_name","selectedRoleId","_l","roleList","item","roleName","confirmAssignRole","staticRenderFns","name","created","data","cb","required","message","trigger","min","max","validator","edit_username","methods","params","type","center","user","confirmButtonText","cancelButtonText","rid","component"],"sourceRoot":""}